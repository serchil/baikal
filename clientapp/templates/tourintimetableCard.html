<!doctype html>
{% load staticfiles %}
<html>
	<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Расписание туров</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="{% static 'forinput.css' %}" type="text/css">

    <link rel="stylesheet" href="{% static 'footer.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'normolize.css' %}" type="text/css">
        <link rel="stylesheet" href="{% static 'paginator3.css' %}" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Didact+Gothic" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'bootstrap.css' %}" type="text/css">

<link rel="stylesheet" href="{% static 'multi6.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'adm_tour_card_style.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'adm_PlaceCard_style.css' %}" type="text/css">


    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
    function checkClick() {
   $('.check').trigger('click');
  }
  </script>
    <script>
    $(function(){
            $('.small_filter').click(function(){
                $('.container1').toggleClass('filter_open');
            });
        });


				$( document ).ready(function() {
				document.getElementById('bookTour').href = '../../newBookingByM/?tour='+{{tour_t.id}};
				});

  </script>


  <link rel="stylesheet" href="{% static 'adm-header-style1.css' %}" type="text/css">
	</head>
	<body> <style>.fa:hover{cursor: pointer;}</style>
		<header>
			<nav id = "list" class="navbar navbar-expand-lg navbar-dark " style = "background-color: rgba(37, 115, 187, 0.9); display:flex; flex-direction: column;">

				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar1" aria-controls="navbar1" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon navbar-light"></span>
				</button>


				<div class="collapse navbar-collapse" id="navbar1" >
					<ul  class="navbar-nav  ml-auto" style = "display:flex; flex-direction: column;">
						<div class = "menuPart"style = "display: flex;  ">
							<li id = "el"  class="nav-item"><a class="nav-link"  style = "color: white;" href="{% url 'bookingsList' %}">Бронирования</a></li>

							<li id = "el" class="nav-item"><a class="nav-link"  style = "color: white;" href="{% url 'userList'%}">Пользователи</a></li>
							<li id = "el"  class="nav-item"><a class="nav-link"  style = "color: white;" href="{% url 'getTours' %}">Туры</a></li>
							<li id = "el"  class="nav-item"><a class="nav-link"  style = "color: white;" href="{% url 'getHotels' %}">Гостиницы</a></li>
							<li id = "el"  class="nav-item"><a class="nav-link"  style = "color: white;" href="{% url 'getPlaces' %}">Места</a></li>
							<li id = "el" class="nav-item"><a class="nav-link"  style = "color: white;" href="{% url 'timetableList' %}">Расписание</a></li>

						</div>

					</ul>

				</div>
			</nav>
		</header>




			<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="#">Административная панель </a></li>
<li class="breadcrumb-item"><a href="{% url 'timetableList' %}">Расписание </a></li>
    <li class="breadcrumb-item active" aria-current="page">Информация о туре "{{tour_t.name}}"</li>
  </ol>
</nav>
    <div class = "auth_bar" style="margin-left:90%;">
<a href ="{% url 'personal_account_show' %}">	{{user.username}}</a> | <a id = "out" href = "{% url 'log_out' %}">Выйти</a>
	</div>


		<hr style = "height: 1 px; width: 300px; background-color:#6666ff">
    <h2 style = "text-align: center;">Информация о туре</h2>




  <div class = "container" id = "cont_card" style = "max-width: 750px; " >
    <div class = "row" id = "first_row" >

      <div class = "col-md-12" style = "background-color:#f5f5f5;  border: 1px solid black;">

				<div class = "row mt-4">


	 					<div class = "col-2"><label for="name">Тур:</label></div>
	 					<div class = "col-2"><label for="name"> {{tour_t.tourID.name}}</label></div>

	 				</div>
					<div class = "row mt-4">


		 					<div class = "col-2"><label for="name"> Дата тура:</label></div>
		 					<div class = "col-2"><label for="name"> {{date}}</label></div>

		 				</div>
						<div class = "row mt-4">


								<div class = "col-2"><label for="name"> Стоимость:</label></div>
								<div class = "col-2"><label for="name"> {{tour_t.price}} руб</label></div>

							</div>



						<div class = "row mt-4">


								<div class = "col-2"><label for="name"> Количество мест:</label></div>
								<div class = "col-2"><label for="name"> {{tour_t.capacity}}</label></div>

							</div>



<!-- <div>
          <label for="text" style ="margin-top: 25px;"> Гостиницы в туре:


            </label>
            {%  if tour_t.hotels.all %}
<ul>
   {%  for h in tour_t.hotels.all %}
  <li>   {{h.name}}</li>
  {% endfor %}
</ul>
{% else %}
гостиницы не указаны
{%  endif %}
</div> -->

  <div class="row" style ="margin-top: 10px;">
{% if bookings %}



              <table class="table" style = "width: 100%; margin: 0 auto; margin-top: 30px; border-top: 1px solid black;border-bottom: 1px solid black;">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col"></th>
                    <th scope="col">№</th>
                    <th scope="col">Номер бронирования</th>
                    <th scope="col">Дата бронирования</th>
                    <th scope="col">Мест забронировано</th>
                  </tr>
                </thead>
                <tbody>

									{% for b in bookings %}
                  <tr>
                    <td><a href="{% url 'getBookingCardToEdit' b.id %}"><i class="fa fa-bars" aria-hidden="true"></i></a></td>
                    <td>1</td>
                    <td>{{b.id}}</td>
                    <td>{{b.date_of_booking|date:'d.m.Y'}}</td>
                    <td>{{b.number_of_people}}</td>

                  </tr>
{% endfor %}

                  <tr>
                    <th scope="row"> </th>
                    <td></td>
                    <td></td>

                    <td> Забронировано мест </td>

                    <td> {{num}} </td>

                  </tr>
                  <tr>
                    <th scope="row"> </th>
                
                    <td></td> <td></td>
                    <td> Свободных мест </td>

                    <td> {{freeS}} </td>

                  </tr>
                </tbody>
              </table>

{% else %}



		<div class = "col-7"><label for="name"> Для данного тура пока нет ни одного подтвержденного бронирования</label></div>


							{% endif %}
              <div class="container m-auto" style = "width: 100%; margin: 0 auto; ">
<div class = "row" style = "margin-top: 30px;">
<div class ="col-sm-4">	</div>

<div class ="col-sm-4">	</div>
  </div>
</div>





            </div>









         <div class = "row mt-3">
<div class = "col-sm-3 mb-3"></div>
<div class = "col-sm-6 mb-3">

<a  id="bookTour" > <button type="button" class="btn btn-secondary" >Добавить бронирование </button></a>

<a href = "../../timetable"><button class="btn btn-primary"  style="padding-left:20px; padding-right:20px;">Ок</button></a>
</div>
<div class = "col-lg-4 col-md-4  "></div>
</div>
















      </div>
    </div>
  </div>



		<script>

			addEventListenerAll('.btn-spn-up', 'click', event => this.spinUp(event))
			addEventListenerAll('.btn-spn-down', 'click', event => this.spinDown(event))

			function spinUp(event) {
				var spinRoot = event.currentTarget.parentElement.parentElement  // .btn-spn
				var spinInput = spinRoot.children[1]
				if (!spinInput.value || spinInput.value==="" || isNaN(parseInt(spinInput.value)))
				spinInput.value = 0
				var spinValue = parseInt(spinInput.value)

				var max = spinInput.getAttribute('max')
				if (!max || spinValue < max)
				spinInput.value = spinValue+1
				else if (max && spinValue > max)
				spinInput.value = max
			}

			function spinDown(event) {
				var spinRoot = event.currentTarget.parentElement.parentElement  // .btn-spn
				var spinInput = spinRoot.children[1]
				if (!spinInput.value || spinInput.value==="" || isNaN(parseInt(spinInput.value)))
				spinInput.value = 0
				var spinValue = parseInt(spinInput.value)

				var min = spinInput.getAttribute('min')
				if (!min || spinValue > min)
				spinInput.value = spinValue-1
				else if (min && spinValue < min)
				spinInput.value = min
			}

			function addEventListenerAll(selector, eventName, eventHandler) {
				var elements = document.querySelectorAll(selector)
				for(var i = 0; i<elements.length; i++) {
					elements[i].addEventListener(eventName, eventHandler)
				}
			}</script>




	</div>
		<script type="text/javascript" src=" {% static 'js/jquery-3.3.1.min.js' %} "></script>
		<script type="text/javascript" src=" {% static 'js/popper.js' %} "></script>
		<script type="text/javascript" src=" {% static 'js/bootstrap.js' %} "></script>
			<script type="text/javascript" src=" {% static 'js/mmulti.min.js' %} "></script>

				 <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
			 	<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

				 <script type="text/javascript">
      $(".myselect").select2();
</script>

</body>
</html>
